# 🧪 テストガイド

このガイドでは、Sugu-Studyプラットフォームの動作確認とテスト手順を説明します。

## 📋 テスト環境

### ローカル環境
- URL: `http://localhost:3000`
- 用途: 開発・デバッグ

### 本番環境（Vercel）
- URL: `https://sugu-study.vercel.app`（または独自ドメイン）
- 用途: 本番運用

### ステージング環境（GCP Cloud Run - オプション）
- URL: `https://sugu-study-xxx-an.a.run.app`
- 用途: 本番前テスト

## ✅ テストチェックリスト

### 1. 基本機能テスト

#### 1.1 トップページ
- [ ] トップページが正常に表示される
- [ ] ヘッダーナビゲーションが表示される
- [ ] ランディング動画が再生できる
- [ ] 「今すぐ始める」ボタンが機能する
- [ ] 言語切り替えが動作する（日本語/ベトナム語/インドネシア語/英語）

#### 1.2 認証機能
- [ ] サインアップページが表示される
- [ ] メールアドレスでサインアップできる
- [ ] ログインページが表示される
- [ ] メールアドレスでログインできる
- [ ] ログアウトが機能する
- [ ] パスワードリセットが機能する

#### 1.3 業種選択
- [ ] 業種一覧ページ（/sectors）が表示される
- [ ] 農業セクターが表示される
- [ ] 畜産セクターが表示される
- [ ] セクターカードがクリック可能
- [ ] セクター詳細ページに遷移できる

### 2. 農業分野テスト

#### 2.1 セクター詳細ページ
- [ ] 農業セクターページ（/sectors/agriculture）が表示される
- [ ] セクター説明が表示される
- [ ] 試験概要が表示される
- [ ] 受験の流れが表示される
- [ ] カテゴリ一覧が表示される（9カテゴリ）
- [ ] 各カテゴリカードがクリック可能

#### 2.2 カテゴリページ
- [ ] カテゴリページ（例: /sectors/agriculture/agri-general）が表示される
- [ ] カテゴリ説明が表示される
- [ ] レッスン一覧が表示される
- [ ] 進捗バーが表示される
- [ ] 章末テストセクションが表示される
- [ ] レッスンカードがクリック可能

#### 2.3 レッスンページ
- [ ] レッスンページ（例: /learn/agri-001）が表示される
- [ ] レッスンタイトルが表示される
- [ ] レッスン説明が表示される
- [ ] 進捗バーが表示される
- [ ] タブ切り替えが機能する（動画/音声/テキスト）

### 3. メディア再生テスト

#### 3.1 動画再生
- [ ] 動画タブが表示される
- [ ] Cloudflare Stream動画が読み込まれる
- [ ] 動画が再生できる
- [ ] 再生/一時停止ボタンが機能する
- [ ] シークバーが機能する
- [ ] 音量調整が機能する
- [ ] 再生速度変更が機能する（0.75x, 1x, 1.25x, 1.5x）
- [ ] フルスクリーンが機能する
- [ ] 再生位置が保存される

#### 3.2 音声再生
- [ ] 音声タブが表示される
- [ ] Supabase Storage音声が読み込まれる
- [ ] 音声が再生できる
- [ ] 再生/一時停止ボタンが機能する
- [ ] シークバーが機能する
- [ ] 15秒スキップ（前/後）が機能する
- [ ] 音量調整が機能する
- [ ] オフラインダウンロードボタンが表示される（オンライン時）
- [ ] 再生位置が保存される

#### 3.3 テキストコンテンツ
- [ ] テキストタブが表示される
- [ ] レッスンテキストが表示される
- [ ] Markdown形式が正しくレンダリングされる
- [ ] 画像が表示される（ある場合）

### 4. 進捗管理テスト

#### 4.1 学習進捗
- [ ] レッスン視聴で進捗が更新される
- [ ] 進捗バーが正しく表示される
- [ ] 「レッスンを完了する」ボタンが機能する
- [ ] 完了したレッスンにチェックマークが表示される
- [ ] 学習履歴ページ（/history）で進捗が確認できる

#### 4.2 章末テスト
- [ ] 全レッスン完了後、章末テストが解放される
- [ ] 章末テストページ（/sectors/agriculture/agri-general/quiz）が表示される
- [ ] 問題が表示される
- [ ] 選択肢が選択できる
- [ ] 次の問題に進める
- [ ] 結果が表示される
- [ ] 正解/不正解が表示される
- [ ] 解説が表示される

### 5. Tierシステムテスト

#### 5.1 Tier 1（ゲスト）
- [ ] サインアップ後、Tier 1になる
- [ ] 動画講義が視聴できる
- [ ] 音声ポッドキャストが聴ける
- [ ] Tier 2コンテンツにロックアイコンが表示される

#### 5.2 Tier 2（学習者）
- [ ] プロフィール追加情報入力ページが表示される
- [ ] 居住都道府県を選択できる
- [ ] 現在の職種を選択できる
- [ ] SNSアカウントを入力できる（任意）
- [ ] Tier 2にアップグレードできる
- [ ] 学習履歴が表示される
- [ ] バッジシステムが利用できる
- [ ] 紹介システムが利用できる

#### 5.3 Tier 3（認証済み）
- [ ] KYCページ（/profile/kyc）が表示される
- [ ] 在留カード（表）をアップロードできる
- [ ] 在留カード（裏）をアップロードできる
- [ ] 運転免許証の有無を選択できる
- [ ] KYC申請ができる
- [ ] Tier 3にアップグレードできる
- [ ] CBTシミュレーションが利用できる
- [ ] 修了証が発行できる

### 6. PWA機能テスト

#### 6.1 インストール
- [ ] PWAインストールプロンプトが表示される
- [ ] 「ホーム画面に追加」が機能する（モバイル）
- [ ] アプリアイコンがホーム画面に追加される
- [ ] アプリとして起動できる

#### 6.2 オフライン機能
- [ ] オフライン時にフォールバックページが表示される
- [ ] キャッシュされた音声がオフラインで再生できる
- [ ] オフライン状態インジケーターが表示される
- [ ] オンライン復帰時に同期される

### 7. レスポンシブデザインテスト

#### 7.1 デスクトップ（1920x1080）
- [ ] レイアウトが正常に表示される
- [ ] ナビゲーションが正常に機能する
- [ ] 動画プレイヤーが適切なサイズで表示される

#### 7.2 タブレット（768x1024）
- [ ] レイアウトが適切に調整される
- [ ] タッチ操作が機能する
- [ ] メニューが適切に表示される

#### 7.3 モバイル（375x667）
- [ ] モバイルレイアウトが表示される
- [ ] ボトムナビゲーションが表示される
- [ ] タッチ操作が機能する
- [ ] 動画プレイヤーが適切なサイズで表示される
- [ ] フォントサイズが読みやすい

### 8. パフォーマンステスト

#### 8.1 Lighthouse監査
- [ ] Performance: 90以上
- [ ] Accessibility: 90以上
- [ ] Best Practices: 90以上
- [ ] SEO: 90以上
- [ ] PWA: 90以上

#### 8.2 読み込み速度
- [ ] First Contentful Paint (FCP): 1.8秒以下
- [ ] Largest Contentful Paint (LCP): 2.5秒以下
- [ ] Cumulative Layout Shift (CLS): 0.1以下
- [ ] Time to Interactive (TTI): 3.8秒以下

### 9. セキュリティテスト

#### 9.1 認証
- [ ] 未認証ユーザーは保護されたページにアクセスできない
- [ ] ログイン後、適切にリダイレクトされる
- [ ] セッションが適切に管理される
- [ ] ログアウト後、セッションが破棄される

#### 9.2 データ保護
- [ ] KYC書類が非公開バケットに保存される
- [ ] 他のユーザーのデータにアクセスできない
- [ ] RLSポリシーが機能している

### 10. 多言語対応テスト

#### 10.1 日本語
- [ ] すべてのページが日本語で表示される
- [ ] レッスンコンテンツが日本語で表示される
- [ ] 試験問題が日本語で表示される

#### 10.2 ベトナム語
- [ ] 言語切り替えでベトナム語に変更できる
- [ ] すべてのページがベトナム語で表示される
- [ ] レッスンコンテンツがベトナム語で表示される

#### 10.3 インドネシア語
- [ ] 言語切り替えでインドネシア語に変更できる
- [ ] すべてのページがインドネシア語で表示される
- [ ] レッスンコンテンツがインドネシア語で表示される

#### 10.4 英語
- [ ] 言語切り替えで英語に変更できる
- [ ] すべてのページが英語で表示される
- [ ] レッスンコンテンツが英語で表示される

## 🐛 バグ報告テンプレート

バグを発見した場合、以下の情報を記録してください：

```markdown
### バグ報告

**環境:**
- URL: [本番/ステージング/ローカル]
- ブラウザ: [Chrome 120 / Safari 17 / Firefox 121]
- デバイス: [Desktop / iPhone 14 / Android]
- OS: [macOS 14 / iOS 17 / Android 13]

**再現手順:**
1. [手順1]
2. [手順2]
3. [手順3]

**期待される動作:**
[何が起こるべきか]

**実際の動作:**
[何が起こったか]

**スクリーンショット:**
[添付]

**コンソールエラー:**
```
[エラーメッセージ]
```

**追加情報:**
[その他の関連情報]
```

## 📊 テスト結果記録

### テスト実施日: ____年__月__日

| カテゴリ | 合格/不合格 | 備考 |
|---------|------------|------|
| 基本機能 | ⬜ 合格 / ⬜ 不合格 | |
| 農業分野 | ⬜ 合格 / ⬜ 不合格 | |
| メディア再生 | ⬜ 合格 / ⬜ 不合格 | |
| 進捗管理 | ⬜ 合格 / ⬜ 不合格 | |
| Tierシステム | ⬜ 合格 / ⬜ 不合格 | |
| PWA機能 | ⬜ 合格 / ⬜ 不合格 | |
| レスポンシブ | ⬜ 合格 / ⬜ 不合格 | |
| パフォーマンス | ⬜ 合格 / ⬜ 不合格 | |
| セキュリティ | ⬜ 合格 / ⬜ 不合格 | |
| 多言語対応 | ⬜ 合格 / ⬜ 不合格 | |

### 総合評価
- ⬜ リリース可能
- ⬜ 修正後リリース可能
- ⬜ 大幅な修正が必要

### テスト担当者
- 名前: ________________
- 署名: ________________

## 🚀 次のステップ

テストが完了したら：

1. ✅ バグを修正
2. ✅ 再テスト
3. ✅ ユーザーフィードバック収集
4. ✅ 改善を継続
5. ✅ 他の分野（畜産、建設など）のコンテンツ追加
