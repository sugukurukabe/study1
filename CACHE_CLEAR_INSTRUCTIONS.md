# 🔄 キャッシュクリア手順

## ✅ 確認済み: 最新コードはデプロイ済み

本番環境を確認したところ、**最新のコードは正常にデプロイされています**：
- ✅ 新しい動画ID: `f2f7a67b989a45dd6b850b8462623c40`
- ✅ 畜産業セクター: 存在する
- ✅ 言語切り替え機能: 実装済み

**問題はブラウザのキャッシュです！**

---

## 🚀 今すぐ試す解決方法

### 方法1: スーパーリロード（最も簡単）

#### Chrome / Edge / Firefox
```
Mac: Cmd + Shift + R
Windows: Ctrl + Shift + R
```

#### Safari
```
Mac: Cmd + Option + R
```

これでキャッシュを無視して最新版を読み込みます。

---

### 方法2: シークレットモード（確実）

1. **新しいシークレットウィンドウを開く**
   - Chrome: `Cmd+Shift+N` (Mac) / `Ctrl+Shift+N` (Windows)
   - Safari: `Cmd+Shift+N`

2. **本番環境にアクセス**
   ```
   https://sugu-study-56144068988.asia-northeast1.run.app
   ```

3. **確認項目**
   - トップページの動画が再生される
   - 畜産業（🐄）が表示される
   - 言語切り替えボタンが表示される

---

### 方法3: Service Workerをクリア（PWA対応アプリの場合）

#### Chrome / Edge

1. **開発者ツールを開く**
   - `F12` または `Cmd+Option+I` (Mac)

2. **Applicationタブを選択**

3. **左メニューから「Service Workers」を選択**

4. **「Unregister」ボタンをクリック**

5. **「Clear site data」をクリック**

6. **ページをリロード** (`Cmd+R`)

#### Safari

1. **開発メニューを有効化**
   - 環境設定 > 詳細 > 「メニューバーに"開発"メニューを表示」にチェック

2. **開発 > Service Workers を表示**

3. **該当のService Workerを削除**

4. **ページをリロード**

---

### 方法4: ブラウザのキャッシュを完全にクリア

#### Chrome / Edge

1. **設定を開く**
   - `Cmd+,` (Mac) / `Ctrl+,` (Windows)

2. **「プライバシーとセキュリティ」を選択**

3. **「閲覧履歴データの削除」をクリック**

4. **期間を「全期間」に設定**

5. **以下をチェック**
   - ✅ 閲覧履歴
   - ✅ Cookieと他のサイトデータ
   - ✅ キャッシュされた画像とファイル

6. **「データを削除」をクリック**

7. **本番環境にアクセス**

#### Safari

1. **Safari > 設定 > 詳細**

2. **「メニューバーに"開発"メニューを表示」にチェック**

3. **開発 > キャッシュを空にする**

4. **履歴 > 履歴を消去**

5. **本番環境にアクセス**

---

## 📱 スマートフォンの場合

### iPhone (Safari)

1. **設定アプリを開く**

2. **Safari を選択**

3. **「履歴とWebサイトデータを消去」をタップ**

4. **Safariを再起動**

5. **本番環境にアクセス**

### Android (Chrome)

1. **Chromeアプリを開く**

2. **右上のメニュー（⋮）をタップ**

3. **「履歴」を選択**

4. **「閲覧データを削除」をタップ**

5. **「キャッシュされた画像とファイル」をチェック**

6. **「データを削除」をタップ**

7. **本番環境にアクセス**

---

## ✅ 確認項目

キャッシュクリア後、以下を確認してください：

### トップページ
- [ ] 「2号とは？」のタイトルが表示される
- [ ] 動画プレイヤーが表示される
- [ ] 動画が再生される
- [ ] 畜産業（🐄）が表示される

### 畜産業セクター
```
https://sugu-study-56144068988.asia-northeast1.run.app/sectors/livestock
```
- [ ] ページが表示される
- [ ] 4つの章が表示される
- [ ] レッスンが表示される

### レッスンページ
```
https://sugu-study-56144068988.asia-northeast1.run.app/ja/learn/livestock-ch1-01
```
- [ ] 動画プレイヤーが表示される
- [ ] 言語切り替えボタン（🇯🇵日本語 / 🇮🇩Indonesia）が表示される
- [ ] 動画が再生される

---

## 🔍 それでも表示されない場合

### デバッグ手順

1. **開発者ツールを開く** (`F12`)

2. **Consoleタブを確認**
   - エラーメッセージがないか確認

3. **Networkタブを確認**
   - ページのリソースが正しく読み込まれているか確認
   - 304 (Not Modified) が多い場合はキャッシュが原因

4. **Applicationタブを確認**
   - Service Workerの状態を確認
   - Cacheの内容を確認

---

## 🎯 技術的な説明

### なぜキャッシュが問題になるのか

1. **PWA (Progressive Web App) 対応**
   - このアプリはPWA対応しているため、Service Workerがキャッシュを管理
   - 古いバージョンがキャッシュされている可能性

2. **Next.jsの静的最適化**
   - Next.jsは静的ページを積極的にキャッシュ
   - ブラウザキャッシュに古いバージョンが残っている

3. **CDNキャッシュ**
   - Cloud Runの前段にCDNがある場合、そこでもキャッシュされる

### 解決策

- スーパーリロード: ブラウザキャッシュを無視
- シークレットモード: 完全にクリーンな状態
- Service Worker削除: PWAのキャッシュをクリア

---

## 📞 確認してください

以下の方法を試して、結果を教えてください：

1. **シークレットモードで本番環境にアクセス**
   ```
   https://sugu-study-56144068988.asia-northeast1.run.app
   ```

2. **確認項目**
   - 畜産業が表示される？
   - 動画が再生される？
   - 言語切り替えボタンが表示される？

**シークレットモードで正しく表示されれば、キャッシュが原因です！**

---

## 🚀 次のステップ

### シークレットモードで正しく表示される場合

→ **通常のブラウザでキャッシュをクリア**（上記の方法3または4）

### シークレットモードでも表示されない場合

→ **別の問題があります。以下を教えてください：**
- どのページが表示されない？
- エラーメッセージは？
- 開発者ツールのConsoleに何が表示される？

---

**まずはシークレットモードで確認してください！** 🔍

これで最新版が表示されるはずです！
